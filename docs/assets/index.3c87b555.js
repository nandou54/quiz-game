var e=Object.defineProperty,r=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,c=(r,a,t)=>a in r?e(r,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[a]=t,o=(e,r)=>{for(var a in r||(r={}))s.call(r,a)&&c(e,a,r[a]);if(t)for(var a of t(r))n.call(r,a)&&c(e,a,r[a]);return e},i=(e,t)=>r(e,a(t)),d=(e,r)=>{var a={};for(var c in e)s.call(e,c)&&r.indexOf(c)<0&&(a[c]=e[c]);if(null!=e&&t)for(var c of t(e))r.indexOf(c)<0&&n.call(e,c)&&(a[c]=e[c]);return a};import{c as l,j as u,u as _,a as m,b as h,r as p,d as g,e as v,R as f,f as b,P as y}from"./vendor.00f40b09.js";var C={base:"_base_rvsh7_1",gradient:"_gradient_rvsh7_1",foodanddrink:"_foodanddrink_rvsh7_23",geography:"_geography_rvsh7_29",generalknowledge:"_generalknowledge_rvsh7_35",history:"_history_rvsh7_41",artandliterature:"_artandliterature_rvsh7_47",movies:"_movies_rvsh7_53",music:"_music_rvsh7_59",science:"_science_rvsh7_65",societyandculture:"_societyandculture_rvsh7_71",sportandleisure:"_sportandleisure_rvsh7_77"};var w={base:"_base_2dz6a_1",appear:"_appear_2dz6a_1",categories:"_categories_2dz6a_6",selectedCategories:"_selectedCategories_2dz6a_35",play:"_play_2dz6a_43",forbidden:"_forbidden_2dz6a_47"};function q(e,r){return r.map((r=>r?e[r]:"")).join(" ")}const N=l({name:"app",initialState:{mode:"initial",selectedCategories:[],questions:5,startTime:0},reducers:{addCategory:(e,r)=>{e.selectedCategories.push(r.payload)},removeCategory:(e,r)=>{const a=e.selectedCategories.indexOf(r.payload);e.selectedCategories.splice(a,1)},setQuestions:(e,r)=>{e.questions=r.payload},startGame:e=>{e.mode="game",e.startTime=performance.now()},endGame:e=>{e.mode="score"},restart:e=>{e.mode="initial"}}}),{addCategory:z,removeCategory:k,setQuestions:S,startGame:x,endGame:O,restart:j}=N.actions;var A=N.reducer;const P=["Food and Drink","Geography","General knowledge","History","Art and Literature","Movies","Music","Science","Society and Culture","Sport and Leisure"];var G="_base_1jqm0_1";function $(e){var r=e,{children:a,className:t}=r,s=d(r,["children","className"]);return u("div",i(o({className:`${G} ${t}`},s),{children:a}))}var F={base:"_base_1v6do_1",primary:"_primary_1v6do_22"};function M(e){var r=e,{children:a,className:t,primary:s}=r,n=d(r,["children","className","primary"]);const c=`${t} ${q(F,["base",s&&"primary"])}`;return u("button",i(o({className:c},n),{children:a}))}function Q(){const{selectedCategories:e,questions:r}=_((({app:e})=>e)),a=m(),t=e=>{a(k(e.target.value))},s=q(w,["play",(0===e.length||r<5||r>20)&&"forbidden"]);return u("form",{onSubmit:r=>{r.preventDefault(),e.length&&a(x())},children:h($,{className:w.base,children:[h("div",{children:[u("h2",{children:"Welcome to Quiz Game"}),u("p",{children:"Please select one or more categories"}),h("div",{className:w.categories,children:[u("label",{htmlFor:"categories",children:"Categories"}),u("select",{name:"categories",defaultValue:"",onClick:e=>{a(z(e.target.value)),e.target.value=""},children:P.filter((r=>!e.includes(r))).map((e=>u("option",{children:e},e)))}),u("label",{htmlFor:"number",children:"Questions"}),u("input",{type:"number",name:"number",value:r,onChange:e=>{a(S(e.target.value))},min:5,max:20})]})]}),h("div",{children:[u("h3",{children:"Categories selected"}),e.length>0?u("div",{className:w.selectedCategories,children:e.map((e=>h(M,{value:e,onClick:t,children:[e," âœ•"]},e)))}):u("small",{children:"None selected"})]}),u("div",{className:s,children:u(M,{primary:!0,children:"Play"})})]})})}var T={};var L={base:"_base_1q16q_1",appear:"_appear_1q16q_1",question:"_question_1q16q_7",answers:"_answers_1q16q_13",done:"_done_1q16q_21",disappear:"_disappear_1q16q_1"};var D={base:"_base_1d00i_1",correct:"_correct_1d00i_8",wrong:"_wrong_1d00i_12"};function E({label:e,correct:r,selected:a,done:t,onClick:s}){const n=q(D,["base",t&&(r?"correct":a&&"wrong")]);return u(M,{className:n,onClick:s,children:e})}const R=l({name:"game",initialState:{cards:[],currentCard:{},lastCard:!1,results:[]},reducers:{setCards:(e,r)=>{e.cards=r.payload,e.currentCard=e.cards[0],e.lastCard=!1,e.results=[]},answerCard:(e,r)=>{const a={card:e.currentCard,answer:r.payload,correct:r.payload===e.currentCard.correctAnswer};if(e.results.push(a),e.lastCard)return;const t=e.currentCard.index,s=e.cards[t+1];e.currentCard=s,t===e.cards.length-2&&(e.lastCard=!0)}}}),{setCards:H,answerCard:I}=R.actions;var V=R.reducer;function W({question:e,answers:r=[],correctAnswer:a,category:t}){const[s,n]=p.exports.useState(!1),[c,o]=p.exports.useState(),{lastCard:i}=_((({game:e})=>e)),d=m(),l=q(L,["base",s&&"done"]);return h($,{className:l,children:[u("small",{children:t}),u("div",{className:L.question,children:u("h3",{children:e})}),u("div",{className:L.answers,children:r.map(((e,r)=>u(E,{label:e,correct:a===e,selected:c===e,done:s,onClick:()=>(e=>{s||(n(!0),o(e),setTimeout((()=>{d(I(e)),n(!1),i&&d(O())}),2e3))})(e)},r)))})]})}function Y(){const[e,r]=p.exports.useState(!1),{app:{selectedCategories:a,questions:t},game:{currentCard:s}}=_((e=>e)),n=m();return p.exports.useEffect((()=>{const e=`https://api.trivia.willfry.co.uk/questions?categories=${a.join(",").replaceAll(" ","_").toLowerCase()}&limit=${t}`;g.get(e).then((({data:e})=>{const a=e.map((({question:e,correctAnswer:r,incorrectAnswers:a,category:t},s)=>{a.length>3&&a.splice(3);const n=[r,...a];return function(e){for(let r=e.length-1;r>0;r--){const a=Math.floor(Math.random()*(r+1)),t=e[r];e[r]=e[a],e[a]=t}}(n),{index:s,question:e,answers:n,correctAnswer:r,category:t}}));n(H(a)),r(!0)})).catch(console.log)}),[]),{ready:e,currentCard:s}}function B(){const{ready:e,currentCard:r}=Y();return u("div",{className:T.base,children:e&&u(W,o({},r))})}var J={base:"_base_fz0d2_1",appear:"_appear_fz0d2_1",results:"_results_fz0d2_16",restart:"_restart_fz0d2_31",result:"_result_fz0d2_16",answer:"_answer_fz0d2_35",correct:"_correct_fz0d2_39"};function K(){const e=m(),{app:{questions:r,startTime:a},game:{results:t}}=_((e=>e)),s=t.filter((({correct:e})=>e)).length,n=(performance.now()-a)/1e3;let c=s/t.length*(10*t.length-n);c=c>=0?c:s/t.length;return h($,{className:J.base,children:[h("h1",{children:["Score: ",c.toFixed(1)]}),h("h3",{children:["Correct answers: ",s,"/",r]}),h("h3",{children:["Time elapsed: ",n.toFixed(1),"s"]}),u("div",{className:J.results,children:t.map((({correct:e,answer:r,card:a},t)=>u(U,o({number:t+1,correct:e,answer:r},a),t)))}),u("div",{className:J.restart,children:u(M,{primary:!0,onClick:()=>{e(j())},children:"Restart"})})]})}function U({question:e,number:r,answer:a,correctAnswer:t,correct:s}){const n=q(J,["result",s&&"correct"]);return h("div",{className:n,children:[h("div",{children:[h("b",{children:["Question ",r,":"]})," ",e]}),h("div",{className:J.answer,children:[u("b",{children:"Your answer:"})," ",u("span",{children:a})]}),!s&&h("div",{children:[u("b",{children:"Correct answer:"})," ",t]})]})}const X={initial:u(Q,{}),game:u(B,{}),score:u(K,{})};function Z(){const{mode:e,currentCard:r}=_((({app:{mode:e},game:{currentCard:r}})=>({mode:e,currentCard:r}))),a=q(C,["base",r.category&&r.category.replace(/\s/g,"").toLowerCase()]);return u("div",{className:a,children:X[e]})}const ee=v({reducer:{app:A,game:V}});f.render(u(b.StrictMode,{children:u(y,{store:ee,children:u(Z,{})})}),document.querySelector("main"));
